<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>

<body>
  <script>
    // 递归setTimeout实现setinternal
    // function dgui () {
    //   console.log(new Date().toLocaleString())
    //   setTimeout(dgui, 1000)
    // }
    // dgui()

    // 递归实现深拷贝
    let obj = {
      name: "lc",
      age: 21,
      happy: {
        do: "code"
      },
      family: ['father', 'mother', 'sister']
    }

    let o = {}
    function copydeep (o, obj) {
      for (const key in obj) {
        // 必须先判断数组，再考虑对象，因为数组也是一种对象
        if (obj[key] instanceof Array) {
          o[key] = []
          copydeep(o[key], obj[key])
        } else if (obj[key] instanceof Object) {
          o[key] = {}
          copydeep(o[key], obj[key])
        } else {
          o[key] = obj[key]
        }
      }
    }
    copydeep(o, obj)
    // 修改原本的对象和数组
    obj.happy.do = 'games'
    obj.family = ['1', '2', '3']
    console.log(o);  //并没有改变拷贝后的

  </script>
</body>

</html>